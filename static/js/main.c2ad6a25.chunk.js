(this["webpackJsonptest-app"]=this["webpackJsonptest-app"]||[]).push([[0],{101:function(e,n,t){"use strict";t.r(n);var a=t(0),s=t(1),c=t.n(s),i=t(54),r=t.n(i),o=(t(62),t(63),t(64),t(15),t(2),t(4)),l=t(5),h=t(7),u=t(6);s.Component,s.Component,s.Component;var p=t(21),d=t.n(p),j=t(37),f=function(e){Object(h.a)(t,e);var n=Object(u.a)(t);function t(){var e;Object(o.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=n.call.apply(n,[this].concat(s))).click=function(){e.props.onClick(e.props.id)},e}return Object(l.a)(t,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"channel-item",onClick:this.click,children:[Object(a.jsx)("div",{children:this.props.name}),Object(a.jsx)("span",{children:this.props.participants})]})}}]),t}(c.a.Component),v=function(e){Object(h.a)(t,e);var n=Object(u.a)(t);function t(){var e;Object(o.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=n.call.apply(n,[this].concat(s))).handleClick=function(n){e.props.onSelectChannel(n)},e}return Object(l.a)(t,[{key:"render",value:function(){var e=this,n=Object(a.jsx)("div",{className:"no-content-message",children:"There is no channels to show"});return this.props.channels&&this.props.channels.map&&(n=this.props.channels.map((function(n){return Object(a.jsx)(f,{id:n.id,name:n.name,participants:n.participants,onClick:e.handleClick},n.id)}))),Object(a.jsx)("div",{className:"channel-list",children:n})}}]),t}(c.a.Component),m=(t(70),function(e){Object(h.a)(t,e);var n=Object(u.a)(t);function t(){return Object(o.a)(this,t),n.apply(this,arguments)}return Object(l.a)(t,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"message-item",children:[Object(a.jsx)("div",{children:Object(a.jsx)("b",{children:this.props.senderName})}),Object(a.jsx)("span",{children:this.props.text})]})}}]),t}(c.a.Component)),b=function(e){Object(h.a)(t,e);var n=Object(u.a)(t);function t(){var e;Object(o.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=n.call.apply(n,[this].concat(s))).state={input_value:""},e.send=function(){e.state.input_value&&""!=e.state.input_value&&(e.props.onSendMessage(e.props.channel.id,e.state.input_value),e.setState({input_value:""}))},e.handleInput=function(n){e.setState({input_value:n.target.value})},e}return Object(l.a)(t,[{key:"render",value:function(){var e=Object(a.jsx)("div",{className:"no-content-message",children:"There is no messages to show"});return this.props.channel&&this.props.channel.messages&&(e=this.props.channel.messages.map((function(e){return Object(a.jsx)(m,{id:e.id,senderName:e.senderName,text:e.text},e.id)}))),Object(a.jsxs)("div",{className:"messages-panel",children:[Object(a.jsx)("div",{className:"meesages-list",children:e}),this.props.channel&&Object(a.jsxs)("div",{className:"messages-input",children:[Object(a.jsx)("input",{type:"text",onChange:this.handleInput,value:this.state.input_value}),Object(a.jsx)("button",{onClick:this.send,children:"Send"})]})]})}}]),t}(c.a.Component),O=t(56),x=t.n(O),g="http://127.0.0.1:3005",k=function(e){Object(h.a)(t,e);var n=Object(u.a)(t);function t(){var e;Object(o.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=n.call.apply(n,[this].concat(s))).state={channels:null,socket:null,channel:null},e.configureSocket=function(){var n=x()(g);n.on("connection",(function(){e.state.channel&&e.handleChannelSelect(e.state.channel.id)})),n.on("channel",(function(n){var t=e.state.channels;t.forEach((function(e){e.id===n.id&&(e.participants=n.participants)})),e.setState({channels:t})})),n.on("message",(function(n){var t=e.state.channels;t.forEach((function(e){e.id===n.channel_id&&(e.messages?e.messages.push(n):e.messages=[n])})),e.setState({channels:t})})),e.socket=n},e.loadChannels=Object(j.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:fetch("http://localhost:3005/getChannels").then(function(){var n=Object(j.a)(d.a.mark((function n(t){var a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.json();case 2:a=n.sent,e.setState({channels:a.channels});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)}))),e.handleChannelSelect=function(n){var t=e.state.channels.find((function(e){return e.id===n}));e.setState({channel:t}),e.socket.emit("channel-join",n,(function(e){}))},e.handleSendMessage=function(n,t){e.socket.emit("send-message",{channel_id:n,text:t,senderName:e.socket.id,id:Date.now()})},e}return Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadChannels(),this.configureSocket()}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"chat-app",children:[Object(a.jsx)(v,{channels:this.state.channels,onSelectChannel:this.handleChannelSelect}),Object(a.jsx)(b,{onSendMessage:this.handleSendMessage,channel:this.state.channel})]})}}]),t}(c.a.Component);r.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(k,{})}),document.getElementById("root"))},62:function(e,n,t){},64:function(e,n,t){},70:function(e,n,t){}},[[101,1,2]]]);
//# sourceMappingURL=main.c2ad6a25.chunk.js.map